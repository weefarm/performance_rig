PRESETS =
{
GOTO_MENU
GOTO_LOOPER
LSYNC_SELECT
MICRO_CTRL
QC_SETTINGS
STOP_ALL
PANIC_STOP
}

EFFECTS =
{
QC_RECORDING
QC_PLAYING
QC_DUBBING
QC_REVERSE
QC_HALF_SPEED
QC_ONE_SHOT
HRP_RECORDING
HRP_PLAYING
HRP_REVERSE
HRP_HALF_SPEED
HRP_MUTE
MICRO_ACTIVE
MOM_ACTIVE
QC_LOOPER_UI
QC_GIG_VIEW
QC_TUNER
QC_TUNER
MICRO_HOLD
MICRO_REV
MICRO_REC
MICRO_PLAY
MICRO_STOP
MICRO_ERASE
HALFSPEED_ACTIVE
REVERSE_ACTIVE
PLAYING
DUPLICATING
ONESHOT_ACTIVE
PUNCHED_IN
RECORDING
DUBBING
}

TRIGGERS =
{
GLOBAL_STOP
TAP_TEMPO
QC_REC_ON
QC_REC_OFF
QC_PLAY_TOGGLE
QC_REV_TOGGLE
QC_HALF_TOGGLE
QC_ONE_TOGGLE
QC_UNDO_REDO
HRP_REC_TOGGLE
HRP_PLAY_TOGGLE
HRP_REV_TOGGLE
HRP_HALF_TOGGLE
HRP_PEEL
HRP_UNPEEL
MICRO_ENGAGE
MICRO_REC_GO
MICRO_PLAY_GO
MICRO_STOP_GO
MICRO_ERASE_GO
S10_TRIGGER
TOGGLE_HALFSPEED
TOGGLE_REVERSE
TOGGLE_PLAY
TOGGLE_DUPLICATE
TOGGLE_ONESHOT
PUNCH_IN_MOM
PUNCH_IN_ON
PUNCH_IN_OFF
TOGGLE_MICRO
}

SWEEPS =
{
MICRO_MIX_PEDAL
HRP_MIX_PEDAL
}

BANKS =
{
   MENU : GOTO_LOOPER | LSYNC_SELECT | MICRO_CTRL | QC_TUNER | TAP_TEMPO | MOM_ACTIVE | QC_GIG_VIEW | QC_LOOPER_UI | QC_SETTINGS | PANIC_STOP
   LOOPER : HRP_RECORDING | HRP_PLAYING | HRP_REVERSE | HRP_HALF_SPEED | TOGGLE_MICRO | QC_RECORDING | QC_PLAYING  | QC_REVERSE   | QC_HALF_SPEED | S10_TRIGGER
   LSYNC : SYNC_0 | SYNC_1 | SYNC_2 | SYNC_3 | SYNC_4 | SYNC_5 | SYNC_6 | SYNC_7 | SYNC_8 | SYNC_16
   MICRO_CTRL : MICRO_ACTIVE | MICRO_HOLD | MICRO_REV | MICRO_REC | MICRO_PLAY | MICRO_STOP | MICRO_ERASE | GOTO_LOOPER | GOTO_MENU | S10_TRIGGER
}

CHANNEL QC = 1
CHANNEL HRP = 2
CHANNEL MICRO = 3
CHANNEL GCP = 4
REMOTE_CONTROL_CHANNEL = 4

VAR $CC_QC_REC = 53
VAR $CC_QC_PLAY = 54
VAR $CC_QC_REV = 55
VAR $CC_QC_HALF = 51
VAR $CC_QC_ONE = 50
VAR $CC_QC_UNDO = 56
VAR $CC_QC_UI = 48
VAR $CC_QC_GIG = 46
VAR $CC_QC_TUNER = 45
VAR $CC_QC_TAP = 44
VAR $CC_HRP_REC = 70
VAR $CC_HRP_PLAY = 69
VAR $CC_HRP_REV = 74
VAR $CC_HRP_HALF = 65
VAR $CC_HRP_PEEL = 72
VAR $CC_HRP_UNPEEL = 123
VAR $CC_HRP_TAP = 64
VAR $CC_MICRO_BYP = 102
VAR $CC_MICRO_TAP = 93
VAR $S10_ACTIVE = false
VAR $S10_HELD = false
VAR $MICRO_ACTIVE_S = false
VAR $MICRO_HELD = false

INIT_FCB =
{
GotoBank MENU
SwitchOff MOM_ACTIVE
$MidiChannel = 1
}

TRIGGER_CLICK TAP_TEMPO =
{
SendMidi QC CtrlChange $CC_QC_TAP 127
SendMidi HRP CtrlChange $CC_HRP_TAP 127
SendMidi MICRO CtrlChange $CC_MICRO_TAP 127
}

TRIGGER_CLICK GLOBAL_STOP =
{
SendMidi QC CtrlChange $CC_QC_PLAY 0
SendMidi HRP CtrlChange $CC_HRP_PLAY 0
SendMidi MICRO CtrlChange 31 127
SwitchOff QC_RECORDING
SwitchOff HRP_RECORDING
}

TRIGGER_CLICK S10_TRIGGER =
{
$S10_ACTIVE = true
$S10_HELD = false
WaitWithoutBlocking 20
if ($S10_ACTIVE) {
$S10_HELD = true
if (#CURRENT_BANK == MENU) {
SendTrigger GLOBAL_STOP
}
else {
GotoBank MENU
}
}
}

TRIGGER_RELEASE S10_TRIGGER =
{
if (!$S10_HELD) {
SendTrigger TAP_TEMPO
}
$S10_ACTIVE = false
}

TRIGGER_CLICK TOGGLE_MICRO =
{
$MICRO_ACTIVE_S = true
$MICRO_HELD = false
WaitWithoutBlocking 4
if ($MICRO_ACTIVE_S) {
$MICRO_HELD = true
SwitchOn MICRO_ACTIVE
}
}

TRIGGER_RELEASE TOGGLE_MICRO =
{
if ($MICRO_HELD) {
SwitchOff MICRO_ACTIVE
}
else {
if (EFFECT_ON MICRO_ACTIVE) {
SwitchOff MICRO_ACTIVE
}
else {
SwitchOn MICRO_ACTIVE
}
}
$MICRO_ACTIVE_S = false
}

TRIGGER_CLICK QC_REC_ON = SendMidi QC CtrlChange $CC_QC_REC 127
TRIGGER_CLICK QC_REC_OFF = SendMidi QC CtrlChange $CC_QC_REC 0

EFFECT_ON QC_RECORDING =
{
SendTrigger QC_REC_ON
if (EFFECT_ON QC_PLAYING) {
SwitchOff QC_PLAYING
}
}
EFFECT_OFF QC_RECORDING = SendTrigger QC_REC_OFF

EFFECT_ON HRP_RECORDING = SendMidi HRP CtrlChange $CC_HRP_REC 127
EFFECT_OFF HRP_RECORDING = SendMidi HRP CtrlChange $CC_HRP_REC 0

EFFECT_ON MICRO_ACTIVE = SendMidi MICRO CtrlChange $CC_MICRO_BYP 127
EFFECT_OFF MICRO_ACTIVE = SendMidi MICRO CtrlChange $CC_MICRO_BYP 0

SWEEP MICRO_MIX_PEDAL = SendMidi QC CtrlChange 12
SWEEP HRP_MIX_PEDAL = SendMidi QC CtrlChange 13

PRESET PANIC_STOP = SendTrigger GLOBAL_STOP

PRESET LSYNC_SELECT = GotoBank LSYNC
PRESET MICRO_CTRL = GotoBank MICRO_CTRL

PRESET SYNC_0 = SendMidi QC CtrlChange 47 0
PRESET SYNC_1 = SendMidi QC CtrlChange 47 13
PRESET SYNC_2 = SendMidi QC CtrlChange 47 26
PRESET SYNC_3 = SendMidi QC CtrlChange 47 39
PRESET SYNC_4 = SendMidi QC CtrlChange 47 52
PRESET SYNC_5 = SendMidi QC CtrlChange 47 65
PRESET SYNC_6 = SendMidi QC CtrlChange 47 78
PRESET SYNC_7 = SendMidi QC CtrlChange 47 91
PRESET SYNC_8 = SendMidi QC CtrlChange 47 104
PRESET SYNC_16 = SendMidi QC CtrlChange 47 127

EFFECT_ON MICRO_HOLD = SendMidi MICRO CtrlChange 118 127
EFFECT_OFF MICRO_HOLD = SendMidi MICRO CtrlChange 118 0
EFFECT_ON MICRO_REV = SendMidi MICRO CtrlChange 119 127
EFFECT_OFF MICRO_REV = SendMidi MICRO CtrlChange 119 0
EFFECT_ON MICRO_REC =
{
if (EFFECT_ON MICRO_PLAY) {
SwitchOff MICRO_PLAY
}
SendTrigger MICRO_REC_GO
}
EFFECT_OFF MICRO_REC = SendTrigger MICRO_REC_GO
EFFECT_ON MICRO_PLAY =
{
if (EFFECT_ON MICRO_REC) {
SwitchOff MICRO_REC
}
SendTrigger MICRO_PLAY_GO
}
EFFECT_OFF MICRO_PLAY = SendTrigger MICRO_STOP_GO
EFFECT_ON MICRO_STOP = SendTrigger GLOBAL_STOP
EFFECT_OFF MICRO_STOP = SendMidi MICRO CtrlChange 31 0
EFFECT_ON MICRO_ERASE = SendTrigger MICRO_ERASE_GO
EFFECT_OFF MICRO_ERASE = SendMidi MICRO CtrlChange 31 0

EFFECT_ON HALFSPEED_ACTIVE = SendTrigger TOGGLE_HALFSPEED
EFFECT_OFF HALFSPEED_ACTIVE = SendTrigger TOGGLE_HALFSPEED
EFFECT_ON REVERSE_ACTIVE = SendTrigger TOGGLE_REVERSE
EFFECT_OFF REVERSE_ACTIVE = SendTrigger TOGGLE_REVERSE
EFFECT_ON PLAYING =
{
if (EFFECT_ON RECORDING) {
SwitchOff RECORDING
}
if (EFFECT_ON DUBBING) {
SwitchOff DUBBING
}
SendTrigger TOGGLE_PLAY
}
EFFECT_OFF PLAYING = SendTrigger TOGGLE_PLAY
EFFECT_ON DUPLICATING = SendTrigger TOGGLE_DUPLICATE
EFFECT_OFF DUPLICATING = SendTrigger TOGGLE_DUPLICATE
EFFECT_ON ONESHOT_ACTIVE = SendTrigger TOGGLE_ONESHOT
EFFECT_OFF ONESHOT_ACTIVE = SendTrigger TOGGLE_ONESHOT
EFFECT_ON PUNCHED_IN =
{
if (EFFECT_ON MOM_ACTIVE) {
SendTrigger PUNCH_IN_MOM
}
else {
SendTrigger PUNCH_IN_ON
}
}
EFFECT_OFF PUNCHED_IN =
{
if (EFFECT_ON MOM_ACTIVE) {
SendTrigger PUNCH_IN_OFF
}
}

PRESET GOTO_MENU = GotoBank MENU
PRESET GOTO_LOOPER = GotoBank LOOPER
PRESET STOP_ALL = SendTrigger GLOBAL_STOP
